# -*- encoding : utf-8 -*-

if false 
  solr_resp = "{'responseHeader'=>{'status'=>0,'QTime'=>4170,'params'=>{'group.ngroups'=>'true','fl'=>'id,pub_date_facet,fulltitle_display,fulltitle_vern_display,author_display,score,pub_info_display,url_access_display','q'=>' ','group.limit'=>'5','group.field'=>'format_main_facet','group'=>'true','wt'=>'ruby','rows'=>'20','defType'=>'edismax'}},'grouped'=>{'format_main_facet'=>{'matches'=>6845737,'ngroups'=>19,'groups'=>[{'groupValue'=>'Book','doclist'=>{'numFound'=>6146219,'start'=>0,'maxScore'=>1.0,'docs'=>[{'id'=>'3377088','pub_date_facet'=>1998,'pub_info_display'=>['Berlin : New York : Springer Berlin Heidelberg, c1998.'],'fulltitle_display'=>'Theory reasoning in connection calculi','author_display'=>'Baumgartner, Peter.|Baumgartner, Peter.','score'=>1.0},{'id'=>'2228822','pub_date_facet'=>1993,'pub_info_display'=>['New York : St. Martin\'s Press, 1993.'],'fulltitle_display'=>'Lebanon : fire and embers : a history of the Lebanese civil war','author_display'=>'Hiro, Dilip|Hiro, Dilip','score'=>1.0},{'id'=>'4076191','pub_date_facet'=>2000,'pub_info_display'=>['Sejny : Pogranicze, 2000.'],'fulltitle_display'=>'Ukraina, Polska, świat : wybór reportaży i artykułów','author_display'=>'Osadczuk, Bogdan, 1920-2011|Osadczuk, Bogdan, 1920-2011.','score'=>1.0},{'id'=>'7665132','pub_date_facet'=>2007,'pub_info_display'=>['Reston, Va. : U.S. Geological Survey, 2007.'],'fulltitle_display'=>'Near-surface structure and velocities of the northeastern Santa Cruz Mountains and the western Santa Clara Valley, California, from seismic imaging','url_access_display'=>['http://purl.access.gpo.gov/GPO/LPS86811'],'score'=>1.0},{'id'=>'4850613','pub_date_facet'=>1924,'pub_info_display'=>['Chicago, Ill. : The University of Chicago Press, [c1924]'],'fulltitle_display'=>'Readings in Risk and risk-bearing','author_display'=>'Hardy, Charles O. (Charles Oscar), 1884-1948|Hardy, Charles O. (Charles Oscar), 1884-1948.','score'=>1.0}]}},{'groupValue'=>'Non-musical Recording','doclist'=>{'numFound'=>9646,'start'=>0,'maxScore'=>1.0,'docs'=>[{'id'=>'3604661','pub_date_facet'=>1990,'pub_info_display'=>['1990.'],'fulltitle_display'=>'Do we need arms control if peace breaks out?','author_display'=>'Panofsky, Wolfgang K. H. (Wolfgang Kurt Hermann), 1919-2007|Panofsky, Wolfgang K. H. (Wolfgang Kurt Hermann), 1919-2007.','score'=>1.0},{'id'=>'3604667','pub_date_facet'=>1990,'pub_info_display'=>['1990.'],'fulltitle_display'=>'Mirror stages: psychoanalysis and Afro-American literature','author_display'=>'Johnson, Barbara, 1947-2009|Johnson, Barbara, 1947-2009.','score'=>1.0},{'id'=>'3604677','pub_date_facet'=>1991,'pub_info_display'=>['1991.'],'fulltitle_display'=>'Law and myth in India: Manu and the epics','author_display'=>'Doniger, Wendy.|Doniger, Wendy.','score'=>1.0},{'id'=>'3604516','pub_date_facet'=>1976,'pub_info_display'=>['1976.'],'fulltitle_display'=>'Humanism and the humanities','author_display'=>'Wright, G. H. von (Georg Henrik), 1916-2003|Wright, G. H. von (Georg Henrik), 1916-2003.','score'=>1.0},{'id'=>'3604515','pub_date_facet'=>1976,'pub_info_display'=>['1976.'],'fulltitle_display'=>'Scientific thinking as a destructive process','author_display'=>'Roger, Jacques, 1920-1990|Roger, Jacques, 1920-1990.','score'=>1.0}]}},{'groupValue'=>'Musical Score','doclist'=>{'numFound'=>77101,'start'=>0,'maxScore'=>1.0,'docs'=>[{'id'=>'4076396','pub_date_facet'=>2000,'pub_info_display'=>['Zurich : Amadeus, [2000?], c1975.'],'fulltitle_display'=>'Deux morceaux op. 4 (1911) ; Ballade op. 7 (1912) : [for] piano','author_display'=>'Marek, Czesław, 1891-1985|Marek, Czesław, 1891-1985.','score'=>1.0},{'id'=>'7562406','pub_date_facet'=>1996,'pub_info_display'=>['Wien : Wiener Urtext Edition : Schott / Universal Edition, [1996?], c1973.'],'fulltitle_display'=>'Prélude Des-Dur = D flat major, op. 28, no. 15','author_display'=>'Chopin, Frédéric, 1810-1849|Chopin, Frédéric, 1810-1849.','score'=>1.0},{'id'=>'7562409','pub_date_facet'=>2010,'pub_info_display'=>['Warszawa : Narodowy Instytut Fryderika Chopina, 2010.'],'fulltitle_display'=>'Nokturn op. 62 nr 1 : wydanie faksymilowe rękopisu ze zbiorów The Newberry Library, Chicago (Vault Case MS 7Q 104 = Nocturne, op. 62 no. 1 : facsimile edition of the manuscript held in The Newberry Library, Chicago (Vault Case MS 7Q 104','author_display'=>'Chopin, Frédéric, 1810-1849|Chopin, Frédéric, 1810-1849.','score'=>1.0},{'id'=>'5493198','pub_date_facet'=>1935,'pub_info_display'=>['New York : Robbins Music Corp., c1935.'],'fulltitle_display'=>'Modern advanced guitar method','author_display'=>'Lang, Eddie, 1902-1933|Lang, Eddie, 1902-1933.','score'=>1.0},{'id'=>'3781287','pub_date_facet'=>1999,'pub_info_display'=>['Bryn Mawr, Pa. : T. Presser Co., c1999.'],'fulltitle_display'=>'Fisherman\'s song : for violin and piano','author_display'=>'Chen, Yi, 1953-|Chen, Yi, 1953-','score'=>1.0}]}},{'groupValue'=>'Map or Globe','doclist'=>{'numFound'=>62263,'start'=>0,'maxScore'=>1.0,'docs'=>[{'id'=>'7624353','pub_date_facet'=>2008,'pub_info_display'=>['[Lakewood, Colo.] : U.S. Dept. of the Interior, U.S. Geological Survey, 2008.'],'fulltitle_display'=>'Airborne gravity survey and ground gravity in Afghanistan, a website for distribution of data','url_access_display'=>['http://purl.access.gpo.gov/GPO/LPS97381'],'author_display'=>'Afghanistan. Geological and Mineral Survey.|Afghanistan. Geological and Mineral Survey.','score'=>1.0},{'id'=>'7624707','pub_date_facet'=>2008,'pub_info_display'=>['[St. George, Utah : U.S. Dept. of the Interior, Bureau of Land Management : U.S. Dept. ot the Interior, National Park Service, 2008]'],'fulltitle_display'=>'Grand Canyon-Parashant National Monument','url_access_display'=>['http://purl.access.gpo.gov/GPO/LPS96320'],'author_display'=>'United States. Bureau of Land Management.|United States. Bureau of Land Management.','score'=>1.0},{'id'=>'7624708','pub_date_facet'=>2008,'pub_info_display'=>['[Tucson, AZ : U.S. Dept. of the Interior, Bureau of Land Management, Tucson Field Office, 2008]'],'fulltitle_display'=>'Ironwood Forest National Monument','url_access_display'=>['http://purl.access.gpo.gov/GPO/LPS96321'],'author_display'=>'United States. Bureau of Land Management. Tucson Field Office.|United States. Bureau of Land Management. Tucson Field Office.','score'=>1.0},{'id'=>'7665129','pub_date_facet'=>2007,'pub_info_display'=>['Flagstaff, Ariz. : U.S. Geological Survey, 2007.'],'fulltitle_display'=>'Preliminary geologic map of the Lake Mead 30ʹ X 60ʹ quadrangle, Clark County, Nevada, and Mohave County, Arizona','url_access_display'=>['http://purl.access.gpo.gov/GPO/LPS86804'],'author_display'=>'Beard, Sue.|Beard, Sue.','score'=>1.0},{'id'=>'5824039','pub_date_facet'=>2005,'pub_info_display'=>['Denver, Colo. : U.S. Geological Survey, 2005.'],'fulltitle_display'=>'Geologic map of the Canyon Ferry Dam 30ʹ x 60ʹ quadrangle, west-central Montana','url_access_display'=>['http://pubs.usgs.gov/sim/2005/2860/'],'author_display'=>'Reynolds, Mitchell W.|Reynolds, Mitchell W.','score'=>1.0}]}},{'groupValue'=>'Musical Recording','doclist'=>{'numFound'=>105073,'start'=>0,'maxScore'=>1.0,'docs'=>[{'id'=>'8232944','pub_date_facet'=>2008,'pub_info_display'=>['[Vienna] : Kairos, p2008.'],'fulltitle_display'=>'Le sette chiese Streets ; Eclair de lune','author_display'=>'Mantovani, Bruno, 1974-|Mantovani, Bruno, 1974-','score'=>1.0},{'id'=>'8232940','pub_date_facet'=>2006,'pub_info_display'=>['[London] : Explore Records, [2006].'],'fulltitle_display'=>'Sinfonia mistica Sinfonia di sfere','author_display'=>'Panufnik, Andrzej, 1914-1991|Panufnik, Andrzej, 1914-1991.','score'=>1.0},{'id'=>'5043272','pub_date_facet'=>2002,'pub_info_display'=>['Jaipur? : Brijwani Cassettes, 2002.'],'fulltitle_display'=>'Bhaktāmara stotra Bhakatamar stotra','author_display'=>'Mānatuṅga.|Mānatuṅga.','score'=>1.0},{'id'=>'7956075','pub_date_facet'=>1980,'pub_info_display'=>['[United States] : Theoretical Records, p1980.'],'fulltitle_display'=>'Why don\'t you join the army? Media, media','author_display'=>'Glorious Strangers (Musical group)|Glorious Strangers (Musical group)','score'=>1.0},{'id'=>'5585465','pub_date_facet'=>2003,'pub_info_display'=>['[Vietnam : s.n, 2003]'],'fulltitle_display'=>'Vầng trăng cô đơn','author_display'=>'Ưng, Hòang Phúc.|Ưng, Hòang Phúc.','score'=>1.0}]}},{'groupValue'=>'Manuscript/Archive','doclist'=>{'numFound'=>14473,'start'=>0,'maxScore'=>1.0,'docs'=>[{'id'=>'8191198','pub_date_facet'=>1500,'pub_info_display'=>['[S.l. : s.n., 15--?]'],'fulltitle_display'=>'[Device with Latin epitaphs]','url_access_display'=>['http://encompass.library.cornell.edu/cgi-bin/checkIP.cgi?access=gateway_standard%26url=http://gateway.proquest.com/openurl?ctx_ver=Z39.88-2003&res_id=xri:eebo&rft_val_fmt=&rft_id=xri:eebo:image:202810|Connect to full text.'],'score'=>1.0},{'id'=>'8191194','pub_date_facet'=>1500,'pub_info_display'=>['[London?] : I.D., [15--?]'],'fulltitle_display'=>'[Printer\'s device of John Day]','url_access_display'=>['http://encompass.library.cornell.edu/cgi-bin/checkIP.cgi?access=gateway_standard%26url=http://gateway.proquest.com/openurl?ctx_ver=Z39.88-2003&res_id=xri:eebo&rft_val_fmt=&rft_id=xri:eebo:image:202807|Connect to full text.'],'author_display'=>'Day, John, 1522-1584|Day, John, 1522-1584.','score'=>1.0},{'id'=>'8232912','pub_date_facet'=>1879,'fulltitle_display'=>'Charles D. Wrege Collection of History of Management Photographs. 1879-1996','author_display'=>'Wrege, Charles D.|Wrege, Charles D.','score'=>1.0},{'id'=>'5780596','pub_date_facet'=>1919,'fulltitle_display'=>'Roderick Donaldson papers, 1919-1943','author_display'=>'Donaldson, Roderick.|Donaldson, Roderick.','score'=>1.0},{'id'=>'8191223','pub_date_facet'=>1700,'pub_info_display'=>['[17--?]'],'fulltitle_display'=>'Good news from New-England: with an exact relation of the first planting that countrey : a description of the profits accruing by the worke. Together with a briefe, but true discovery of their order both in church and common-wealth, and maintenance allowed the painfull labourers in that vineyard of ye Lord. With the names of the severall towns, and who be preacher to them','url_access_display'=>['http://encompass.library.cornell.edu/cgi-bin/checkIP.cgi?access=gateway_standard%26url=http://gateway.proquest.com/openurl?ctx_ver=Z39.88-2003&res_id=xri:eebo&rft_val_fmt=&rft_id=xri:eebo:image:202853|Connect to full text.'],'author_display'=>'Winslow, Edward, 1595-1655|Winslow, Edward, 1595-1655.','score'=>1.0}]}},{'groupValue'=>'Journal','doclist'=>{'numFound'=>361298,'start'=>0,'maxScore'=>1.0,'docs'=>[{'id'=>'2478146','pub_date_facet'=>1990,'pub_info_display'=>['Eugene, Or. : Aster Pub. Corp., c1990-2000.'],'fulltitle_display'=>'Geo info systems','score'=>1.0},{'id'=>'5154224','pub_info_display'=>['[Washington, D.C. : Federal Crop Insurance Corporation, Product Development Division]'],'fulltitle_display'=>'Small grains loss adjustment standards handbook','url_access_display'=>['http://purl.access.gpo.gov/GPO/LPS44618'],'score'=>1.0},{'id'=>'2478137','pub_date_facet'=>1989,'pub_info_display'=>['Martin, Tenn. : Elementary Science Education Institute, Center of Excellence for the Enrichment of Science and Mathematics Education at the University of Tennessee at Martin, 1989-'],'fulltitle_display'=>'Journal of elementary science education','score'=>1.0},{'id'=>'1138803','pub_info_display'=>['[Rouen, Direction régionale de Rouen]'],'fulltitle_display'=>'Bulletin de statistique: Basse-Normandie (Calvados, Manche, Orne), Haute-Normandie (Eure, Seine-Maritime)','score'=>1.0},{'id'=>'3377469','pub_info_display'=>['Mineola, N.Y. : HVS International,'],'fulltitle_display'=>'The Asian hotel valuation index','score'=>1.0}]}},{'groupValue'=>'Thesis','doclist'=>{'numFound'=>21353,'start'=>0,'maxScore'=>1.0,'docs'=>[{'id'=>'5493829','pub_date_facet'=>1959,'pub_info_display'=>['1959.'],'fulltitle_display'=>'Die Selbstversorgung in der deutschen Ernährungswirtschaft (seit der Reichsgründung)','author_display'=>'Brünker, Willi, 1928-|Brünker, Willi, 1928-','score'=>1.0},{'id'=>'5506429','pub_date_facet'=>1903,'pub_info_display'=>['1903.'],'fulltitle_display'=>'Fliehkraft und Beharrungsregler. Versuch einer einfachen Darstellung der Regulierungsfrage im Tolleschen Diagramm mit einem Anhange : Über den Einfluss des Reglers auf das Pendeln parallel geschalteter Wechselstrommaschinen','author_display'=>'Thümmler, Fritz.|Thümmler, Fritz.','score'=>1.0},{'id'=>'5506070','pub_date_facet'=>1968,'pub_info_display'=>['[1968]'],'fulltitle_display'=>'Gegenwartsgeschichtliche Bedingungen der Partnerschaft in der Wirtschaft','author_display'=>'Döli, Klaus.|Döli, Klaus.','score'=>1.0},{'id'=>'7109663','pub_date_facet'=>1889,'pub_info_display'=>['1889.'],'fulltitle_display'=>'Geometrical proofs of certain properties of conic sections','author_display'=>'Smith, Charles Mortimer.|Smith, Charles Mortimer.','score'=>1.0},{'id'=>'5585909','pub_date_facet'=>1962,'pub_info_display'=>['1962.'],'fulltitle_display'=>'A history of the Whig Party in Alabama, 1828-1860','author_display'=>'Jackson, Carlton, 1933-|Jackson, Carlton, 1933-','score'=>1.0}]}},{'groupValue'=>'Video','doclist'=>{'numFound'=>33900,'start'=>0,'maxScore'=>1.0,'docs'=>[{'id'=>'7956096','pub_date_facet'=>2012,'pub_info_display'=>['[United States] : Oscilloscope Pictures, 2012.'],'fulltitle_display'=>'Hello I must be going','score'=>1.0},{'id'=>'3820431','pub_date_facet'=>1983,'pub_info_display'=>['Ithaca, NY : Biomedical Communications, N.Y.S. College of Veterinary Medicine, Cornell University, c1983.'],'fulltitle_display'=>'Identification of nematodes','score'=>1.0},{'id'=>'3820437','pub_date_facet'=>1983,'pub_info_display'=>['Ithaca, NY : Biomedical Communications, N.Y.S. College of Veterinary Medicine , Cornell University, c1983.'],'fulltitle_display'=>'Coprological techniques','score'=>1.0},{'id'=>'4076008','pub_date_facet'=>1995,'pub_info_display'=>['New York, NY : Central Park Media, c1995.'],'fulltitle_display'=>'Korea Vietnam','score'=>1.0},{'id'=>'5585938','pub_date_facet'=>2005,'pub_info_display'=>['[S.l.] : 九洲音像出版公司 ; 广州市 : 中凯文化发行, [2005]','[S.l.] : Jiu zhou yin xiang chu ban gong si ; Guangzhou Shi : Zhong kai wen hua fa xing, [2005]'],'fulltitle_vern_display'=>'美人依旧 The beauty remains','fulltitle_display'=>'Mei ren yi jiu The beauty remains','score'=>1.0}]}},{'groupValue'=>'Computer File','doclist'=>{'numFound'=>3463,'start'=>0,'maxScore'=>1.0,'docs'=>[{'id'=>'5585663','pub_date_facet'=>2004,'pub_info_display'=>['Washington, D.C. : Environmental Protection Agency, [2004]'],'fulltitle_display'=>'Sectorstrategies insight, innovation, results','score'=>1.0},{'id'=>'4865261','pub_date_facet'=>1989,'pub_info_display'=>['[Washington, D.C.] : Dept. of Energy, Energy Information Administration ; [Springfield, VA : Available from National Technical Information Service, Office of Data Base Services, 1989]'],'fulltitle_display'=>'PC-AEO forecasting model annual energy outlook','url_access_display'=>['http://purl.access.gpo.gov/GPO/LPS29215'],'score'=>1.0},{'id'=>'4007690','pub_date_facet'=>2000,'pub_info_display'=>['Washington, DC : U.S. Dept. of Commerce, U.S. Census Bureau, Administrative and Customer Services Division, [2000-'],'fulltitle_display'=>'ECON97S report series 1997 : economic census','url_access_display'=>['http://purl.access.gpo.gov/GPO/LPS8995|PURL accesses the Census Bureau\'s 1997 economic census home page, from which a link may be made to the file desired. Connect to full text.'],'author_display'=>'Economic census (1997). Report series.|Economic census (1997).','score'=>1.0},{'id'=>'6404940','pub_date_facet'=>2005,'pub_info_display'=>['[Tucson, Ariz.] : University of Arizona, c2005.'],'fulltitle_display'=>'Beginning Ukrainian','score'=>1.0},{'id'=>'4865946','pub_date_facet'=>1992,'pub_info_display'=>['[Washington, D.C : U.S. Dept. of State : U.S. G.P.O., 1992-   ]'],'fulltitle_display'=>'Dept. of State, press briefings, taken ?\'','url_access_display'=>['http://purl.access.gpo.gov/GPO/LPS6801|press briefings prior to Jan 20, 2001','http://purl.access.gpo.gov/GPO/LPS6805|daily  press briefings'],'score'=>1.0}]}},{'groupValue'=>'Website','doclist'=>{'numFound'=>4476,'start'=>0,'maxScore'=>1.0,'docs'=>[{'id'=>'8232154','pub_date_facet'=>2013,'pub_info_display'=>['[Mountain View, Calif.] : Creative Commons'],'fulltitle_display'=>'Engaging students essays in music pedagogy','url_access_display'=>['http://www.flipcamp.org/engagingstudents/index.html|Connect to full text.'],'score'=>1.0},{'id'=>'6404234','pub_date_facet'=>2006,'pub_info_display'=>['Arlington, VA : Tax Management Inc., [c2006]-'],'fulltitle_display'=>'Business operations in Australia','url_access_display'=>['http://encompass.library.cornell.edu/cgi-bin/checkIP.cgi?access=gateway_standard%26url=http://taxandaccounting.bna.com/btac/display/link_res.adp?lt=email&fname=tm_7010&split=1|Connect to full text. Access limited to authorized subscribers.'],'author_display'=>'Walker, John, 1971-|Walker, John, 1971-','score'=>1.0},{'id'=>'6404236','pub_date_facet'=>2005,'pub_info_display'=>['Arlington, VA : Tax Management, [c2005]-'],'fulltitle_display'=>'Business operations in Belgium','url_access_display'=>['http://encompass.library.cornell.edu/cgi-bin/checkIP.cgi?access=gateway_standard%26url=http://taxandaccounting.bna.com/btac/display/link_res.adp?lt=email&fname=tm_953&split=1|Connect to full text. Access limited to authorized subscribers.'],'score'=>1.0},{'id'=>'6404230','pub_date_facet'=>2005,'pub_info_display'=>['Arlington, VA : Tax Management Inc., [c2005]-'],'fulltitle_display'=>'U.S. taxation of international shipping  and air transport activities','url_access_display'=>['http://encompass.library.cornell.edu/cgi-bin/checkIP.cgi?access=gateway_no-med%26url=http://taxandaccounting.bna.com/btac/display/link_res.adp?lt=email&fname=tm_945&split=1|Connect to full text.'],'author_display'=>'Glicklich, Peter A.|Glicklich, Peter A.','score'=>1.0},{'id'=>'6404232','pub_date_facet'=>2001,'pub_info_display'=>['Arlington, VA  : Tax Management, [c2001]-'],'fulltitle_display'=>'U.S. tax-related accounting issues of multinational corporations','url_access_display'=>['http://encompass.library.cornell.edu/cgi-bin/checkIP.cgi?access=gateway_no-med%26url=http://taxandaccounting.bna.com/btac/display/link_res.adp?lt=email&fname=tm_948&split=1|Connect to full text.'],'author_display'=>'Smith, Paul A.|Smith, Paul A.','score'=>1.0}]}},{'groupValue'=>'Database','doclist'=>{'numFound'=>3938,'start'=>0,'maxScore'=>1.0,'docs'=>[{'id'=>'8232355','pub_date_facet'=>2004,'pub_info_display'=>['[Charlottesville, Va.] : University of Virginia Press'],'fulltitle_display'=>'Rotunda','url_access_display'=>['http://rotunda.upress.virginia.edu/index.php?page_id=Home'],'author_display'=>'Rotunda (Digital publications)|Rotunda (Digital publications)','score'=>1.0},{'id'=>'6280355','pub_date_facet'=>2003,'pub_info_display'=>['Ithaca, N.Y. : Cornell Lab of Ornithology, 2003.'],'fulltitle_display'=>'Cornell Lab of Ornithology gallery of bird and wildlife art','url_access_display'=>['http://resolver.library.cornell.edu/misc/6280355|Connect to full text.','http://resolver.library.cornell.edu/collection/1702|Copyright statement.','http://resolver.library.cornell.edu/collection/1701|View image database. A password is required for off-campus viewing. To obtain a password, email cul-imagepassword-l@cornell.edu and include  Insight Password Request  in the subject heading.'],'score'=>1.0},{'id'=>'7665428','pub_date_facet'=>2005,'pub_info_display'=>['[Washington, D.C.?] : World Digital Library Project.'],'fulltitle_display'=>'World Digital Library','url_access_display'=>['http://purl.access.gpo.gov/GPO/LPS86109'],'score'=>1.0},{'id'=>'5780208','pub_info_display'=>['Tulsa, OK : U.S. Dept. of Energy, National Energy Technology Laboratory'],'fulltitle_display'=>'NETL oil & natural gas technologies reference shelf','url_access_display'=>['http://resolver.library.cornell.edu/misc/5780208'],'score'=>1.0},{'id'=>'3891767','pub_date_facet'=>1997,'pub_info_display'=>['[College Station, Tex.?] : Texas A&M University, Dept. of Agricultural Economics, [1997?]-'],'fulltitle_display'=>'FAEIS food and agricultural education information system','url_access_display'=>['http://resolver.library.cornell.edu/misc/3891767'],'score'=>1.0}]}},{'groupValue'=>'Miscellaneous','doclist'=>{'numFound'=>468,'start'=>0,'maxScore'=>1.0,'docs'=>[{'id'=>'5824569','pub_date_facet'=>2004,'pub_info_display'=>['[Washington, D.C.] : Dept. of Transportation, Federal Aviation Administration, [2004-'],'fulltitle_display'=>'Sport pilot examiner\'s handbook','url_access_display'=>['http://purl.access.gpo.gov/GPO/LPS71390'],'author_display'=>'United States. Federal Aviation Administration.|United States. Federal Aviation Administration.','score'=>1.0},{'id'=>'6040361','pub_info_display'=>['[Washington, D.C. : Judicial Conference of the U.S.'],'fulltitle_display'=>'Judiciary privacy policy page','url_access_display'=>['http://purl.access.gpo.gov/GPO/LPS79065'],'author_display'=>'Judicial Conference of the United States.|Judicial Conference of the United States.','score'=>1.0},{'id'=>'8451948','pub_date_facet'=>2012,'pub_info_display'=>['[Buffalo, N.Y.] : W. S. Hein,'],'fulltitle_display'=>'U.S. international trade library','url_access_display'=>['http://heinonline.org/HOL/Index?index=alpha/U_trade&collection=trade|Access restricted to subscribers'],'score'=>1.0},{'id'=>'2307816','pub_date_facet'=>1985,'pub_info_display'=>['Paris : Editions Dalloz, <1985>-'],'fulltitle_display'=>'Répertoire de contentieux administratif','score'=>1.0},{'id'=>'7592050','pub_date_facet'=>1989,'pub_info_display'=>['Bethesda, Md. : Pike & Fischer','Arlington, VA : Bloomberg BNA, c1989-'],'fulltitle_display'=>'Administrative law, third series','score'=>1.0}]}},{'groupValue'=>'Image','doclist'=>{'numFound'=>1931,'start'=>0,'maxScore'=>1.0,'docs'=>[{'id'=>'3656023','pub_date_facet'=>1991,'pub_info_display'=>['San Francisco : Norman Publishing, 1991-1999.'],'fulltitle_display'=>'Historical medical illustrations','score'=>1.0},{'id'=>'4961448','pub_date_facet'=>1996,'fulltitle_display'=>'Sage Hall renovation photographs, 1996-1998','author_display'=>'Johnson Graduate School of Management(Cornell University).|Johnson Graduate School of Management(Cornell University).','score'=>1.0},{'id'=>'6371700','pub_date_facet'=>1880,'fulltitle_display'=>'Photographs of Indians in Ecuador, circa 1880s-1890s','score'=>1.0},{'id'=>'6079117','pub_date_facet'=>1875,'pub_info_display'=>['[1875].'],'fulltitle_display'=>'Perched rock, Rocker Creek, Arizona','url_access_display'=>['http://www.davidrumsey.com/insightredirector/insightredirector.asp?cid=8&iia=0&ig=David%20Rumsey%20Collection&isl=0&gwisp=0%7CList%5FNo%7CList%20No%7C1%7C2220.075%7C2&gwia=3&gc=0|To view this map disable pop-up blockers.'],'author_display'=>'Bell, William, 1830-1910|Bell, William, 1830-1910.','score'=>1.0},{'id'=>'6079143','pub_date_facet'=>1877,'pub_info_display'=>['[1877].'],'fulltitle_display'=>'Apparatus for determining absolute personal equation','url_access_display'=>['http://www.davidrumsey.com/insightredirector/insightredirector.asp?cid=8&iia=0&ig=David%20Rumsey%20Collection&isl=0&gwisp=0%7CList%5FNo%7CList%20No%7C1%7C2220.044%7C2&gwia=3&gc=0|To view this map disable pop-up blockers.'],'author_display'=>'Geographical Surveys West of the 100th Meridian (U.S.)|Geographical Surveys West of the 100th Meridian (U.S.)','score'=>1.0}]}},{'groupValue'=>'Kit','doclist'=>{'numFound'=>44,'start'=>0,'maxScore'=>1.0,'docs'=>[{'id'=>'3127611','pub_date_facet'=>1995,'pub_info_display'=>['London : BBC Education, 1995.'],'fulltitle_display'=>'Edith Wharton & her novels','score'=>1.0},{'id'=>'5119543','pub_date_facet'=>2003,'pub_info_display'=>['Tranquillity, CA : Alaca Company, [2003]'],'fulltitle_display'=>'Cotton\'s journey a field trip in a box','score'=>1.0},{'id'=>'7621923','fulltitle_display'=>'New York Small Herd Farms, 120 Cows or Fever 2010','score'=>1.0},{'id'=>'7488772','pub_date_facet'=>1994,'pub_info_display'=>['Washington, DC : The International Bank for Reconstruction and Development/The World Bank, c1994.'],'fulltitle_display'=>'Participatory development tool kit materials to facilitate community empowerment','author_display'=>'Narayan-Parker, Deepa.|Narayan-Parker, Deepa.','score'=>1.0},{'id'=>'5042014','pub_date_facet'=>1997,'pub_info_display'=>['Washington, D.C. : The Dept. ; Pittsburgh, PA : Supt. of Docs., U.S. G.P.O., 1997.'],'fulltitle_display'=>'Attaining excellence : a TIMSS resource kit','url_access_display'=>['http://www.ed.gov/NCES/timss|Some individually listed titles are available.'],'author_display'=>'United States. Office of Educational Research and Improvement.|United States. Office of Educational Research and Improvement.','score'=>1.0}]}},{'groupValue'=>'Microform','doclist'=>{'numFound'=>45,'start'=>0,'maxScore'=>1.0,'docs'=>[{'id'=>'6066058','pub_date_facet'=>1898,'pub_info_display'=>['[New York]'],'fulltitle_display'=>'National Consumers\' League records, 1898-1958','author_display'=>'National Consumers\' League.|National Consumers\' League.','score'=>1.0},{'id'=>'2601022','pub_date_facet'=>1971,'pub_info_display'=>['[Seattle, WA], 1971.'],'fulltitle_display'=>'National minority policy in southwest China, 1911-1965','author_display'=>'Deal, David Michael, 1939-|Deal, David Michael, 1939-','score'=>1.0},{'id'=>'7110452','pub_date_facet'=>1960,'pub_info_display'=>['1790.'],'fulltitle_display'=>'Population schedules of the first census of the United States, 1790','author_display'=>'United States. Census Office.|United States. Census Office.','score'=>1.0},{'id'=>'5963987','pub_date_facet'=>1977,'pub_info_display'=>['1845.'],'fulltitle_display'=>'State of New York : census of the state for the year 1845','author_display'=>'New York (State).|New York (State).','score'=>1.0},{'id'=>'3078682','pub_date_facet'=>1957,'pub_info_display'=>['Springfield, Mass., Connecticut Valley Historical Museum, 1957-'],'fulltitle_display'=>'Account book','author_display'=>'Pynchon, John, 1621-1703|Pynchon, John, 1621-1703.','score'=>1.0}]}},{'groupValue'=>'Object','doclist'=>{'numFound'=>14,'start'=>0,'maxScore'=>1.0,'docs'=>[{'id'=>'6367398','pub_date_facet'=>2007,'pub_info_display'=>['[New Delhi, India] : Octave Communications, c2007.'],'fulltitle_display'=>'Jashn-e-Azadi [videorecording] = how we celebrate freedom','score'=>1.0},{'id'=>'6041585','fulltitle_display'=>'Bayonet from the Battle of Saratoga, 1777','score'=>1.0},{'id'=>'6937322','fulltitle_display'=>'[Collection of artworks]','author_display'=>'George-Murray, R. (Richard).|George-Murray, R. (Richard).','score'=>1.0},{'id'=>'7351228','pub_date_facet'=>2011,'pub_info_display'=>['New York, N.Y. : Material ConneXion, 2011.'],'fulltitle_display'=>'[Box of newly developed building materials]','score'=>1.0},{'id'=>'6015160','pub_date_facet'=>2004,'pub_info_display'=>['Watertown, MA : Documentary Educational Resources, c2004.'],'fulltitle_display'=>'Jean Rouch en zijn camera in het hart van Afrika = Jean Rouch and his camera in the heart of Africa','score'=>1.0}]}},{'groupValue'=>'Research Guide','doclist'=>{'numFound'=>21,'start'=>0,'maxScore'=>1.0,'docs'=>[{'id'=>'7495438','pub_date_facet'=>2011,'pub_info_display'=>['Ithaca, N.Y. : Cornell University Library, 2011-'],'fulltitle_display'=>'Cornell Library resources for visitors','url_access_display'=>['http://guides.library.cornell.edu/ICSD|View LibGuide online.','mailto:engrref@cornell.edu|If you have research questions, contact the Engineering Library reference staff.'],'score'=>1.0},{'id'=>'7495433','pub_date_facet'=>2011,'pub_info_display'=>['Ithaca, N.Y. : Cornell University Library, 2011-'],'fulltitle_display'=>'Society of Women Engineers','url_access_display'=>['mailto:engrref@cornell.edu|If you have research questions, contact the Engineering Library reference staff.','http://guides.library.cornell.edu/swe|View LibGuide online.'],'score'=>1.0},{'id'=>'7956162','pub_date_facet'=>2013,'pub_info_display'=>['Ithaca, N.Y. : Cornell University Library, 2013-'],'fulltitle_display'=>'Cornell NYC Tech Campus guide to library resources for the Cornell NYC Tech Campus','url_access_display'=>['mailto:engrref@cornell.edu|If you have research questions, contact the Engineering Library reference staff.','http://guides.library.cornell.edu/nyctech|View LibGuide online.'],'score'=>1.0},{'id'=>'7956189','pub_date_facet'=>2013,'pub_info_display'=>['Ithaca, N.Y. : Cornell University Library, 2013-'],'fulltitle_display'=>'Master your future mastering your productivity in researching and reading scientific papers','url_access_display'=>['http://guides.library.cornell.edu/myf|View LibGuide online.','mailto:engrref@cornell.edu|If you have research questions, contact the Engineering Library reference staff.'],'score'=>1.0},{'id'=>'7462641','pub_info_display'=>['Ithaca, N.Y. : Cornell University Library, 200u-'],'fulltitle_display'=>'Technical reports (NASA, DOE, etc.)','url_access_display'=>['http://guides.library.cornell.edu/techreports|View LibGuide online.','mailto:engrref@cornell.edu|If you have research questions, contact the Engineering Library reference staff.'],'score'=>1.0}]}},{'groupValue'=>'Course Guide','doclist'=>{'numFound'=>11,'start'=>0,'maxScore'=>1.0,'docs'=>[{'id'=>'7406211','pub_info_display'=>['Ithaca, N.Y. : Cornell University Library, 200u-'],'fulltitle_display'=>'CHEME 7920 principles and practices of graduate research','url_access_display'=>['http://guides.library.cornell.edu/cheme7920|View LibGuide online.','mailto:engrref@cornell.edu|If you have research questions, contact the Engineering Library reference staff.'],'score'=>1.0},{'id'=>'7783181','pub_date_facet'=>2012,'pub_info_display'=>['Ithaca, N.Y. : Cornell University Library, 2012-'],'fulltitle_display'=>'MSE 3110/3120 Junior lab I and II','url_access_display'=>['http://guides.library.cornell.edu/mse3110|View LibGuide online.','mailto:engrref@cornell.edu|If you have research questions, contact the Engineering Library reference staff.'],'score'=>1.0},{'id'=>'7422168','pub_info_display'=>['Ithaca, N.Y. : Cornell University Library, 200u-'],'fulltitle_display'=>'MSE 4040 senior materials laboratory','url_access_display'=>['mailto:engrref@cornell.edu|If you have research questions, contact the Engineering Library reference staff.','http://guides.library.cornell.edu/mse4040|View LibGuide online.'],'score'=>1.0},{'id'=>'7462037','pub_info_display'=>['Ithaca, N.Y. : Cornell University Library, 200u-'],'fulltitle_display'=>'EAS 1420 energy and sustainability','url_access_display'=>['http://guides.library.cornell.edu/eas1420|View LibGuide online.','mailto:engrref@cornell.edu|If you have research questions, contact the Engineering Library reference staff.'],'score'=>1.0},{'id'=>'7581650','pub_info_display'=>['Ithaca, N.Y. : Cornell University Library, 200u-'],'fulltitle_display'=>'ENGRC 3500 engineering communications','url_access_display'=>['http://guides.library.cornell.edu/3500|View LibGuide online.','mailto:engrref@cornell.edu|If you have research questions, contact the Engineering Library reference staff.'],'score'=>1.0}]}}]}},'facet_counts'=>{'facet_queries'=>{},'facet_fields'=>{'format'=>['Book',6146219,'Journal',361298,'Thesis',195825,'Musical Recording',105073,'Musical Score',77101,'Map or Globe',62263,'Video',33900,'Manuscript/Archive',14473,'Non-musical Recording',9646,'Website',4476],'online'=>['At the Library',5552201,'Online',1229365],'lc_1letter_facet'=>['P - Language & Literature',1162277,'H - Social Sciences',806980,'D - World History',573985,'B - Philosophy, Psychology, Religion',382111,'Q - Science',373210,'K - Law',313062,'N - Fine Arts',223893,'T - Technology',217927,'M - Music',184652,'J - Political Science',156446],'lc_alpha_facet'=>[],'lc_b4cutter_facet'=>[],'language_facet'=>['English',4290450,'German',469827,'French',310679,'Spanish',270008,'Chinese',236488,'Russian',173370,'Italian',140049,'Indonesian',125892,'Japanese',93866,'Vietnamese',68007],'location_facet'=>['Library Annex',2024390,'Olin Library',1745888,'Kroch Library Asia',621423,'Kroch Library Rare & Manuscripts',486312,'Law Library',190846,'Music Library',189268,'Mann Library',157593,'Uris Library',131395,'ILR Library',114750,'Fine Arts Library',72086],'pub_date_facet'=>['2007',117270,'2000',114672,'2004',114358,'2003',113195,'2002',112417,'2005',112401,'2006',111534,'2008',111074,'2001',108545,'1999',107077],'author_facet'=>['Fiske Icelandic Collection',34012,'United States. Department of Energy. Office of Scientific and Technical Information',27743,'Books24x7, Inc',23589,'National Bureau of Economic Research',21334,'SpringerLink (Online service)',21318,'Geological Survey (U.S.)',20988,'EBSCO Publishing (Firm)',19630,'Naxos Digital Services',16502,'United States. Department of Energy',16364,'White, Andrew Dickson, 1832-1918',15492],'subject_era_facet'=>['20th century',188897,'19th century',73900,'17th century',43875,'18th century',41928,'1945-',24473,'21st century',18683,'Civil War, 1642-1649',14473,'Civil War, 1861-1865',12807,'Revolution, 1789-1799',12786,'16th century',12545],'subject_geo_facet'=>['United States',646970,'Great Britain',172216,'China',112146,'France',85659,'Indonesia',64744,'India',64085,'Germany',63957,'Japan',56066,'England',53481,'Soviet Union',53178],'subject_topic_facet'=>['Bible',50096,'Music',45650,'Women',42585,'Agriculture',41775,'Electronic books',38229,'Education',33213,'Law',32877,'World War, 1939-1945',32490,'Early works',29758,'Broadsides',27492],'subject_content_facet'=>['Non-Fiction (books)',5355572,'Fiction (books)',283421]},'facet_dates'=>{},'facet_ranges'=>{}}}"
WebMock.stub_request(:get, "http://da-dev-solr.library.cornell.edu/solr/blacklight/select?defType=edismax&fl=id,pub_date_facet,fulltitle_display,fulltitle_vern_display,author_display,score,pub_info_display,url_access_display&group=true&group.field=format_main_facet&group.limit=5&group.ngroups=true&q=%20&rows=20&wt=ruby").
  to_return(:status => 200, :body => solr_resp, :headers => {})
end
 
module NavigationHelpers
  # Maps a name to a path. Used by the
  #
  #   When /^I go to (.+)$/ do |page_name|
  #
  # step definition in web_steps.rb
  #
  def path_to(page_name)
    case page_name

    when /the home\s?page/
      root_path

      
    when /the catalog page/
      catalog_index_path
      
    when /the folder page/
      folder_index_path
         
    when /the document page for id (.+)/ 
      catalog_path($1)
      
    when /the facet page for "([^\"]*)"/
      catalog_facet_path($1)
      
    when /the search page/
      search_path

    # Add more mappings here.
    # Here is an example that pulls values out of the Regexp:
    #
    #   when /^(.*)'s profile page$/i
    #     user_profile_path(User.find_by_login($1))

    else
      begin
        page_name =~ /the (.*) page/
        path_components = $1.split(/\s+/)
        self.send(path_components.push('path').join('_').to_sym)
      rescue Object => e
        raise "Can't find mapping from \"#{page_name}\" to a path.\n" +
          "Now, go and add a mapping in #{__FILE__}"
      end
    end
  end

  def field_to(field_name)
    case field_name

    when /^author$/
      '.blacklight-author_display'
    when /^author_addl_display$/
      '.blacklight-author_addl_display'
    when /^edition$/
      '.blacklight-edition_display'
    when /^notes$/
      '.blacklight-notes'
    when /^pub_info$/
      '.blacklight-pub_info_display'
    when /^subject$/
      '.blacklight-subject_display'
    when /^title$/
      '.blacklight-title_display'
    else
      "#{field_name} did not match a field name in field_to"
    end
  end

  def facet_to(facet) 
    case facet

    when /^access$/
      'blacklight-online'
    when /^author\/creator$/
      'blacklight-author_facet'
    when /^fiction\/non-fiction$/
      'blacklight-subject_content_facet'
    when /^format$/
       'blacklight-format'
    when /.*genre$/
       'blacklight-subject_topic_facet'
    when /^language$/
       'blacklight-language_facet'
    when /^library location$/
      'blacklight-location_facet'
    when /^call number$/
       'blacklight-lc_alpha_facet'
    when /.*region$/
       'blacklight-subject_geo_facet'
    when /.*era$/
       'blacklight-subject_era_facet'
    when /^location$/
       'blacklight-location_facet'
    when /^publication year$/
       'blacklight-pub_date_facet'
    end
  end

end

World(NavigationHelpers)


class Capybara::Driver::Node
  def submit_form!
    print self.inspect
    raise NotImplementedError
  end
end

class Capybara::RackTest::Node
  def submit_form!
    Capybara::RackTest::Form.new(driver, self.native).submit({})
  end
end

class Capybara::Poltergeist::Node
  def submit_form!
    Capybara::Poltergeist::Form.new(driver, self.native).submit({})
  end
end

class Capybara::Node::Element
  def submit_form!
    base.submit_form!
  end
end
