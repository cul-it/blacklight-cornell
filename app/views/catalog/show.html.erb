<% if back_to_catalog_needed && !link_back_to_catalog.nil? %>
  <%= link_to link_back_to_catalog[:url], {:class => 'return-link', :title => 'return to previous page'} do %>
    <i class="fa fa-arrow-circle-left"></i> <%= link_back_to_catalog[:label] %>
    <% end %>
<% end %>

<%#= render :partial => 'search_form' %>
<% @page_title = t('blacklight.search.show.title', :document_title => document_show_html_title, :application_name => application_name) -%>
<% content_for(:head) { render_link_rel_alternates } -%>
<% sidebar_items << render_document_sidebar_partial %>


<div class="show">
  <%= render 'constraints', :localized_params=>session[:search] %>
</div>

<div class="row">
  <div class="item-pagination col-sm-5">
    <%= render 'previous_next_doc' %>
  </div>
  <div class="item-tools col-sm-7">
    <ul class="icons-ul" id="item-tools">
      <%= render_document_sidebar_partial %>
    </ul>
  </div>
</div>

<% Rails.logger.debug "Viewing item #{@document.id} - session: #{session} " %>
<% if params[:flash] == 'success' %>
  <%- flash.now[:success]  = 'Your request was submitted successfully.' %>
<% end %>

<div class="row">
  <div id="id_current_counter" style="display: none"><% counter = params[:counter] || session[:search][:counter] %><% if !counter.blank? %><%= counter %><% end %></div>
  <%= render :partial => 'show_metadata' %>
</div>

<div class="row">
  <div class="col-sm-12">
    <% if respond_to? :librarian_view_catalog_path and @document.respond_to?(:to_marc) %>
      <li class="librarian_view">
        <%= link_to t('blacklight.tools.librarian_view'), librarian_view_catalog_path(@document), {:id => 'librarianLink', :data => {:ajax_modal => "trigger"}} %>
      </li>
<%end%>
  </div>
</div>

<% if @document.respond_to?(:export_as_openurl_ctx_kev) %>
  <!--
       // COinS, for Zotero among others.
       // This document_partial_name(@document) business is not quite right,
       // but has been there for a while.
  -->
<% end %>
